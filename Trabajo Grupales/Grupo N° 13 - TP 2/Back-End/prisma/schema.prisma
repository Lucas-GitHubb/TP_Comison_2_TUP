generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model clientes {
  id        Int       @id @default(autoincrement())
  nombre    String    @db.VarChar(100)
  telefono  String?   @db.VarChar(30)
  email     String?   @db.VarChar(150)
  creado_en DateTime? @default(now()) @db.Timestamp(0)
  turnos    turnos[]
}

model servicios {
  id           Int       @id @default(autoincrement())
  nombre       String    @db.VarChar(100)
  precio       Decimal   @db.Decimal(10, 2)
  duracion_min Int       @default(30)
  creado_en    DateTime? @default(now()) @db.Timestamp(0)
  turnos       turnos[]
}

model turnos {
  id            Int           @id @default(autoincrement())
  cliente_id    Int
  servicio_id   Int
  fecha         DateTime      @db.Date
  hora          DateTime      @db.Time(0)
  observaciones String?       @db.Text
  estado        turnos_estado @default(pendiente)
  creado_en     DateTime?     @default(now()) @db.Timestamp(0)
  clientes      clientes      @relation(fields: [cliente_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_turno_cliente")
  servicios     servicios     @relation(fields: [servicio_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_turno_servicio")

  @@index([cliente_id], map: "idx_turnos_cliente")
  @@index([fecha], map: "idx_turnos_fecha")
  @@index([servicio_id], map: "idx_turnos_servicio")
}

enum turnos_estado {
  pendiente
  confirmado
  cancelado
}
